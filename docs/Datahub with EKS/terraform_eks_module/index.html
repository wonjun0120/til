<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<link rel="alternate" type="application/rss+xml" href="/til/blog/rss.xml" title="Wonjun&#39;s Today I Learned RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/til/blog/atom.xml" title="Wonjun&#39;s Today I Learned Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","G-KNXFDH361W","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script><title data-react-helmet="true">EKS Datahub 4 Terraform EKS Module | Wonjun&#x27;s Today I Learned</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://wonjun0120/github.io/til/docs/Datahub with EKS/terraform_eks_module"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="EKS Datahub 4 Terraform EKS Module | Wonjun&#x27;s Today I Learned"><meta data-react-helmet="true" name="description" content="Tags: aib-datateam, aws, datahub, eks, engineering-log, kubernetes, terraform, traefik"><meta data-react-helmet="true" property="og:description" content="Tags: aib-datateam, aws, datahub, eks, engineering-log, kubernetes, terraform, traefik"><link data-react-helmet="true" rel="icon" href="/til/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://wonjun0120/github.io/til/docs/Datahub with EKS/terraform_eks_module"><link data-react-helmet="true" rel="alternate" href="https://wonjun0120/github.io/til/docs/Datahub with EKS/terraform_eks_module" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://wonjun0120/github.io/til/docs/Datahub with EKS/terraform_eks_module" hreflang="x-default"><link rel="stylesheet" href="/til/assets/css/styles.8d002642.css">
<link rel="preload" href="/til/assets/js/runtime~main.808d207f.js" as="script">
<link rel="preload" href="/til/assets/js/main.4442a007.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/til/"><b class="navbar__title">Wonjun&#x27;s TIL</b></a><a class="navbar__item navbar__link navbar__link--active" href="/til/docs/intro">Project Logs</a><a class="navbar__item navbar__link" href="/til/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/wonjun0120" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ğŸŒœ</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ğŸŒ</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/til/docs/intro">Project Log</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_TwRn" href="/til/docs/Datahub with EKS/aws_setting">Datahub with EKS</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/til/docs/Datahub with EKS/aws_setting">EKS Datahub 1 AWS Setting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/til/docs/Datahub with EKS/terraform_basic_setting">EKS Datahub 2 Terraform ì´ˆê¸° ì„¸íŒ…</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/til/docs/Datahub with EKS/terraform_network_module">EKS Datahub 3 Terraform Network Module</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/til/docs/Datahub with EKS/terraform_eks_module">EKS Datahub 4 Terraform EKS Module</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/til/docs/Datahub with EKS/terraform_argocd_module">EKS Datahub 5 Terraform ArgoCD Module</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/til/docs/Datahub with EKS/argocd_deploy">EKS Datahub 6 ArgoCDë¡œ Datahub ë°°í¬</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/til/docs/Noterest/intro">Noterest</a></div></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>EKS - Datahub - 4 Terraform EKS Module</h1></header><p>Tags: aib-datateam, aws, datahub, eks, engineering-log, kubernetes, terraform, traefik</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="ë˜í¼ëŸ°ìŠ¤">ë˜í¼ëŸ°ìŠ¤<a class="hash-link" href="#ë˜í¼ëŸ°ìŠ¤" title="Direct link to heading">â€‹</a></h3><p>ì—¬ê¸°ì„œëŠ” ì•„ë˜ ì±…ì„ ì°¸ê³ í•˜ì—¬ ì§„í–‰í•˜ì˜€ìŠµë‹ˆë‹¤. </p><p><a href="http://www.yes24.com/Product/Goods/102805240" target="_blank" rel="noopener noreferrer">ì²˜ìŒ ì‹œì‘í•˜ëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ - YES24</a></p><p>Terraform, EKS, Traefik, Argocd ë“± ì „ë°˜ì ìœ¼ë¡œ ë‹¤ ì•Œë ¤ì£¼ê³  ìˆìŠµë‹ˆë‹¤!
í˜¹ì‹œë‚˜ ê´€ì‹¬ìˆìœ¼ì‹  ë¶„ë“¤ì€ ê¼­ ì½ì–´ë³´ì‹œëŠ” ê²ƒì„ ì¶”ì²œë“œë¦½ë‹ˆë‹¤!</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="eksë¥¼-ì‹œì‘í•˜ê¸°-ì „ì—">EKSë¥¼ ì‹œì‘í•˜ê¸° ì „ì—..<a class="hash-link" href="#eksë¥¼-ì‹œì‘í•˜ê¸°-ì „ì—" title="Direct link to heading">â€‹</a></h3><p>EKS(Elastic Kubernetes Service)ëŠ” AWSì—ì„œ ì œê³µí•˜ëŠ” ê´€ë¦¬í˜• ì¿ ë²„ë„¤í‹°ìŠ¤ ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.</p><p>EKSë¥¼ ì‚¬ìš©í•˜ë©´ ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ ì„¤ì¹˜ë¶€í„°, ìš´ì˜ì„ EKSê°€ ëŒ€ì‹  í•´ì¤ë‹ˆë‹¤.</p><p>ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ êµ¬í˜„ì€ ë§¤ìš° ë³µì¡í•˜ë©°, ê°€ëŠ¥í•œ ë¹ ë¥´ê²Œ ì‹œìŠ¤í…œì„ ì„¤ì •í•˜ê³  ì‹¤í–‰í•˜ê¸° ìœ„í•´ì„œ EKSë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.</p><p>â“ ì¿ ë²„ë„¤í‹°ìŠ¤?</p><p><a href="https://kubernetes.io/ko/docs/concepts/overview/what-is-kubernetes/" target="_blank" rel="noopener noreferrer">ì¿ ë²„ë„¤í‹°ìŠ¤ë€ ë¬´ì—‡ì¸ê°€?</a></p><blockquote><p>ì˜ˆë¥¼ ë“¤ì–´ ì»¨í…Œì´ë„ˆê°€ ë‹¤ìš´ë˜ë©´ ë‹¤ë¥¸ ì»¨í…Œì´ë„ˆë¥¼ ë‹¤ì‹œ ì‹œì‘í•´ì•¼ í•œë‹¤. ì´ ë¬¸ì œë¥¼ ì‹œìŠ¤í…œì— ì˜í•´ ì²˜ë¦¬í•œë‹¤ë©´ ë” ì‰½ì§€ ì•Šì„ê¹Œ? ê·¸ê²ƒì´ ì¿ ë²„ë„¤í‹°ìŠ¤ê°€ í•„ìš”í•œ ì´ìœ ì´ë‹¤! <strong>ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” ë¶„ì‚° ì‹œìŠ¤í…œì„ íƒ„ë ¥ì ìœ¼ë¡œ ì‹¤í–‰í•˜ê¸° ìœ„í•œ í”„ë ˆì„ ì›Œí¬ë¥¼ ì œê³µí•œë‹¤</strong>. ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ í™•ì¥ê³¼ ì¥ì•  ì¡°ì¹˜ë¥¼ ì²˜ë¦¬í•˜ê³ , ë°°í¬ íŒ¨í„´ ë“±ì„ ì œê³µí•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” ì‹œìŠ¤í…œì˜ ì¹´ë‚˜ë¦¬ì•„ ë°°í¬ë¥¼ ì‰½ê²Œ ê´€ë¦¬ í•  ìˆ˜ ìˆë‹¤.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_y2LR" id="ëª¨ë“ˆ-ìƒì„±">ëª¨ë“ˆ ìƒì„±<a class="hash-link" href="#ëª¨ë“ˆ-ìƒì„±" title="Direct link to heading">â€‹</a></h3><p>EKSì—­ì‹œ í…Œë¼í¼ìœ¼ë¡œ ê´€ë¦¬í•  ì˜ˆì •ì´ê¸°ì— EKSì— ê´€ë ¨ëœ í…Œë¼í¼ ì½”ë“œ ì—­ì‹œ ëª¨ë“ˆë¡œ ê´€ë¦¬í•©ë‹ˆë‹¤. </p><p><code>eks_module</code> í´ë”ë¥¼ ìƒì„±í•˜ê³  ì½”ë“œë¥¼ ì‘ì„±í•  íŒŒì¼ë“¤ì„ ìƒì„±í•©ë‹ˆë‹¤.</p><p>íŒŒì¼ ì´ë¦„ì€ ë„¤íŠ¸ì›Œí¬ ëª¨ë“ˆ ìƒì„±í•  ë•Œ ì‚¬ìš©í–ˆë˜ íŒŒì¼ ì´ë¦„ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤.</p><p><code>main.tf</code> : ëª¨ë“ˆì´ ì‹¤í–‰ë˜ëŠ” íŒŒì¼</p><p><code>variables.tf</code> : ëª¨ë“ˆì˜ inputê°’ì„ ê´€ë¦¬í•˜ëŠ” íŒŒì¼</p><p><code>outputs.tf</code> :ëª¨ë“ˆì˜ outputê°’ì„ ê´€ë¦¬í•˜ëŠ” íŒŒì¼, ë§Œì•½ outputì´ ì—†ëŠ” ê²½ìš° í•´ë‹¹ íŒŒì¼ ìƒì„±ì„ í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="outputtf"><code>output.tf</code><a class="hash-link" href="#outputtf" title="Direct link to heading">â€‹</a></h3><blockquote><p>EKS ëª¨ë“ˆì´ ì œê³µí•˜ëŠ” ì¶œë ¥ ë³€ìˆ˜ë¥¼ ì„ ì–¸í•˜ëŠ” íŒŒì¼ì…ë‹ˆë‹¤.</p></blockquote><div class="codeBlockContainer_J+bg language-HCL theme-code-block"><div class="codeBlockContent_csEI HCL"><pre tabindex="0" class="prism-code language-HCL codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">output &quot;eks_cluster_id&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  value = aws_eks_cluster.aib-cluster.id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">output &quot;eks_cluster_name&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  value = aws_eks_cluster.aib-cluster.name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">output &quot;eks_cluster_certificate_data&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  value = aws_eks_cluster.aib-cluster.certificate_authority.0.data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">output &quot;eks_cluster_endpoint&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  value = aws_eks_cluster.aib-cluster.endpoint</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">output &quot;eks_cluster_nodegroup_id&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  value = aws_eks_node_group.node-group.id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">output &quot;eks_cluster_security_group_id&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  value = aws_security_group.cluster.id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>EKS ëª¨ë“ˆì„ í†µí•´ ìƒì„±í•œ EKS ì •ë³´ë“¤ì„ ë°˜í™˜í•  ìˆ˜ ìˆë„ë¡ êµ¬ì„±í•©ë‹ˆë‹¤.</p><p>ìƒì„±ëœ EKSì˜ í´ëŸ¬ìŠ¤í„° id, í´ëŸ¬ìŠ¤í„° ì´ë¦„, í´ëŸ¬ìŠ¤í„° ì¸ì¦ì„œ, í´ëŸ¬ìŠ¤í„° ì—”ë“œí¬ì¸íŠ¸, í´ëŸ¬ìŠ¤í„° ë…¸ë“œ ê·¸ë£¹ id, í´ëŸ¬ìŠ¤í„° ë³´ì•ˆ ê·¸ë£¹ idë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.</p><p>ì´ë ‡ê²Œ ì¶œë ¥ëœ ë³€ìˆ˜ë“¤ì€ ë‹¤ë¥¸ ëª¨ë“ˆì—ì„œ í•´ë‹¹ í´ëŸ¬ìŠ¤í„°ì— ì ‘ê·¼ í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.</p><p>ë‹¤ìŒ ê¸€ì—ì„œ ì‘ì„±ë  ArgoCDë¥¼ í•´ë‹¹ í´ëŸ¬ìŠ¤í„°ì— ì„¤ì¹˜í•  ë•Œ EKSì˜ ì—”ë“œí¬ì¸íŠ¸ì™€ ì¸ì¦ì„œê°€ í•„ìš”í•©ë‹ˆë‹¤. </p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="maintf"><code>main.tf</code><a class="hash-link" href="#maintf" title="Direct link to heading">â€‹</a></h3><blockquote><p>EKS í´ëŸ¬ìŠ¤í„°ê°€ ì •ì˜ë˜ì–´ìˆëŠ” íŒŒì¼ì…ë‹ˆë‹¤.</p></blockquote><div class="codeBlockContainer_J+bg language-HCL theme-code-block"><div class="codeBlockContent_csEI HCL"><pre tabindex="0" class="prism-code language-HCL codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">provider &quot;aws&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  region = var.aws_region</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>ê³µê¸‰ì ì •ì˜ë¥¼ í•©ë‹ˆë‹¤. </p><p>AWSì˜ EKSë¥¼ ì‚¬ìš©í•˜ë¯€ë¡œ AWS ê³µê¸‰ìë¥¼ ì •ì˜í•©ë‹ˆë‹¤.</p><p>ëª¨ë“ˆì´ í˜¸ì¶œë  ë•Œ ë¦¬ì „ ì •ë³´ë¥¼ ë°›ì•„ì˜¬ ìˆ˜ ìˆë„ë¡ í•˜ì˜€ìŠµë‹ˆë‹¤. ì™¸ë¶€ì—ì„œ ì—¬ëŸ¬ ëª¨ë“ˆì„ ì‹¤í–‰í•˜ëŠ” ê²½ìš° ì„œë¡œ ê°™ì€ ë¦¬ì „ì—ì„œ ì‹¤í–‰ë  ìˆ˜ ìˆë„ë¡ í•˜ë©°, ìœ ì§€ë³´ìˆ˜ì„±ì„ ë†’ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p><div class="codeBlockContainer_J+bg language-HCL theme-code-block"><div class="codeBlockContent_csEI HCL"><pre tabindex="0" class="prism-code language-HCL codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">resource &quot;aws_iam_role&quot; &quot;cluster&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name = var.cluster_name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  assume_role_policy = &lt;&lt;POLICY</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;Version&quot;: &quot;2012-10-17&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;Statement&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;Effect&quot;: &quot;Allow&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;Principal&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;Service&quot;: &quot;eks.amazonaws.com&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;Action&quot;: &quot;sts:AssumeRole&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">POLICY</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">resource &quot;aws_iam_role_policy_attachment&quot; &quot;cluster-AmazonEKSClusterPolicy&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  policy_arn = &quot;arn:aws:iam::aws:policy/AmazonEKSClusterPolicy&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  role       = aws_iam_role.cluster.name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>EKSë¥¼ ì‹¤í–‰í•˜ë ¤ë©´ AWS ë¦¬ì†ŒìŠ¤ë¥¼ ìƒì„±í•˜ê³  ìˆ˜ì •í•  ìˆ˜ ìˆëŠ” ê¶Œí•œì´ ìˆì–´ì•¼í•©ë‹ˆë‹¤.</p><p>ìœ„ ì½”ë“œë¥¼ í†µí•´ EKSì„œë¹„ìŠ¤ì— ëŒ€í•œ ìƒˆë¡œìš´ ìê²© ì¦ëª…ê³¼ ì ‘ê·¼ ì •ì±…ì„ ì •ì˜í•˜ê³  <code>[AmazoneEKSClusterPolicy](https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/service_IAM_role.html)</code> ì •ì±…ì„ ì—°ê²°í•©ë‹ˆë‹¤.</p><p><code>[aws_iam_role](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/iam_role)</code> í…Œë¼í¼ ë¦¬ì†ŒìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ aws ì—­í• ì„ ìƒì„±í•©ë‹ˆë‹¤. </p><p>ì´í›„ <code>[aws_iam_role_policy_attachment](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/iam_role_policy_attachment)</code> í…Œë¼í¼ ë¦¬ì†ŒìŠ¤ë¥¼ í†µí•´ ìƒì„±í•œ aws ì—­í• ì—  <code>[AmazoneEKSClusterPolicy](https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/service_IAM_role.html)</code> ì •ì±…ì„ ì—°ê²°í•©ë‹ˆë‹¤.</p><p>ì°¸ê³  ë ˆí¼ëŸ°ìŠ¤</p><p><a href="https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/service_IAM_role.html" target="_blank" rel="noopener noreferrer">Amazon EKS í´ëŸ¬ìŠ¤í„° IAM ì—­í• </a></p><p>ì—¬ê¸°ì„œ ì‚¬ìš©ë˜ëŠ” í´ëŸ¬ìŠ¤í„° ì´ë¦„ì€ ë‹¤ë¥¸ ê³³ì—ì„œë„ ì‚¬ìš©ë˜ë¯€ë¡œ ë³€ìˆ˜ë¡œ ê´€ë¦¬í•©ë‹ˆë‹¤.</p><p>í´ëŸ¬ìŠ¤í„° ì„œë¹„ìŠ¤ì˜ ì—­í• ê³¼ ì •ì±…ì„ ì •ì˜í•˜ì˜€ìœ¼ë¯€ë¡œ, ë‹¤ìŒì—ëŠ” í´ëŸ¬ìŠ¤í„°ì— ëŒ€í•œ ë„¤íŠ¸ì›Œí¬ ë³´ì•ˆ ì •ì±…ì„ ì •ì˜í•©ë‹ˆë‹¤.</p><div class="codeBlockContainer_J+bg language-HCL theme-code-block"><div class="codeBlockContent_csEI HCL"><pre tabindex="0" class="prism-code language-HCL codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">resource &quot;aws_security_group&quot; &quot;cluster&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name        = var.cluster_name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  description = &quot;Cluster communication with worker nodes&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  vpc_id      = var.vpc_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ingress {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    description = &quot;Inbound traffic from within the security group&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    from_port   = 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    to_port     = 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    protocol    = &quot;-1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cidr_blocks = [&quot;0.0.0.0/0&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    self        = true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  egress {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    from_port   = 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    to_port     = 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    protocol    = &quot;-1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cidr_blocks = [&quot;0.0.0.0/0&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    self        = true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  tags = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Owner       = &quot;aib&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Environment = &quot;dev&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>ì´ì „ì— ì •ì˜í•œ ë„¤íŠ¸ì›Œí¬ ëª¨ë“ˆì„ í†µí•´ ìƒì„±ëœ VPC ì •ë³´ë¥¼ ì‚¬ìš©í•˜ì—¬ í´ëŸ¬ìŠ¤í„°ì˜ ë„¤íŠ¸ì›Œí¬ ë³´ì•ˆ ì •ì±…ì„ ìƒì„±í•©ë‹ˆë‹¤.</p><p><code>[aws_security_group](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/security_group)</code> í…Œë¼í¼ ë¦¬ì†ŒìŠ¤ë¥¼ í†µí•´ ë³´ì•ˆê·¸ë£¹ì„ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p><p>ì´ë ‡ê²Œ ì •ì±…ê³¼ ë³´ì•ˆê·¸ë£¹ì„ ì •ì˜í•˜ì˜€ìœ¼ë©´, ì´ë¥¼ ì´ìš©í•˜ì—¬ EKS í´ëŸ¬ìŠ¤í„°ë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><div class="codeBlockContainer_J+bg language-python theme-code-block"><div class="codeBlockContent_csEI python"><pre tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">resource </span><span class="token string" style="color:#e3116c">&quot;aws_eks_cluster&quot;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;aib-cluster&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name     </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> var</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cluster_name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  role_arn </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> aws_iam_role</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cluster</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">arn</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  vpc_config </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    security_group_ids </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">aws_security_group</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cluster</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">id</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    subnet_ids         </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> var</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cluster_subnet_ids</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  depends_on </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    aws_iam_role_policy_attachment</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cluster</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">AmazonEKSClusterPolicy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><code>[aws_eks_cluster](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/eks_cluster)</code> í…Œë¼í¼ ë¦¬ì†ŒìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ EKS í´ëŸ¬ìŠ¤í„°ë¥¼ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p><p>í´ëŸ¬ìŠ¤í„°ì˜ ì´ë¦„ê³¼, ì•ì„œ ì •ì˜í•œ ì •ì±…, ë³´ì•ˆê·¸ë£¹, ê·¸ë¦¬ê³  ë„¤íŠ¸ì›Œí¬ ëª¨ë“ˆì„ í†µí•´ ìƒì„±í•œ ì„œë¸Œë„·ë“¤ì„ ì—°ê²°í•´ì¤ë‹ˆë‹¤.</p><p>ì´ë ‡ê²Œ EKS í´ëŸ¬ìŠ¤í„°ë¥¼ ìƒì„±í•˜ë©´ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ë¥¼ ìƒì„±í•˜ê¸° ìœ„í•´ í•„ìš”í•œ ëª¨ë“  ê´€ë¦¬ êµ¬ì„± ìš”ì†Œê°€ ìë™ìœ¼ë¡œ ì„¤ì •ë©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ì´ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ ì‹œìŠ¤í…œì—ì„œ ë‘ë‡Œ ì—­í• ì„ í•˜ëŠ” <a href="https://kubernetes.io/ko/docs/concepts/overview/components/#%EC%BB%A8%ED%8A%B8%EB%A1%A4-%ED%94%8C%EB%A0%88%EC%9D%B8-%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8" target="_blank" rel="noopener noreferrer">ì»¨íŠ¸ë¡¤ í”Œë ˆì¸</a>ì˜ ì—­í• ì„ í•©ë‹ˆë‹¤.</p><p>ì´ì œëŠ” ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ê³¼ í•¨ê»˜ ì—¬ëŸ¬ ì„œë¹„ìŠ¤ë“¤ì´ ì‹¤í–‰ë  ì¥ì†Œ, ë…¸ë“œë“¤ì´ í•„ìš”í•©ë‹ˆë‹¤. </p><p>ë…¸ë“œ ì—­ì‹œ í…Œë¼í¼ìœ¼ë¡œ ì •ì˜í•©ë‹ˆë‹¤.</p><p>ì •ì˜í•˜ê¸° ì „ EKS í´ëŸ¬ìŠ¤í„°ë¥¼ ìƒì„±í•˜ê¸° ì „ì— ì—­í• ì„ ìƒì„±í•´ì£¼ì—ˆë“¯ì´ ë…¸ë“œ ì—­ì‹œ ì—­í• ì´ í•„ìš”í•©ë‹ˆë‹¤.</p><p>ë…¸ë“œ ìƒì„±ì— ì‚¬ìš©í•  ì—­í• ì„ ë¨¼ì € ìƒì„±í•´ì¤ë‹ˆë‹¤.</p><div class="codeBlockContainer_J+bg language-HCL theme-code-block"><div class="codeBlockContent_csEI HCL"><pre tabindex="0" class="prism-code language-HCL codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">resource &quot;aws_iam_role&quot; &quot;node&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name = &quot;${var.cluster_name}.node&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  assume_role_policy = &lt;&lt;POLICY</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;Version&quot;: &quot;2012-10-17&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;Statement&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;Effect&quot;: &quot;Allow&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;Principal&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;Service&quot;: &quot;ec2.amazonaws.com&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;Action&quot;: &quot;sts:AssumeRole&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">POLICY</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">resource &quot;aws_iam_role_policy_attachment&quot; &quot;node-AmazonEKSWorkerNodePolicy&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  policy_arn = &quot;arn:aws:iam::aws:policy/AmazonEKSWorkerNodePolicy&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  role       = aws_iam_role.node.name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">resource &quot;aws_iam_role_policy_attachment&quot; &quot;node-AmazonEKS_CNI_Policy&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  policy_arn = &quot;arn:aws:iam::aws:policy/AmazonEKS_CNI_Policy&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  role       = aws_iam_role.node.name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">resource &quot;aws_iam_role_policy_attachment&quot; &quot;node-AmazonEC2ContainerRegistryReadOnly&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  policy_arn = &quot;arn:aws:iam::aws:policy/AmazonEC2ContainerRegistryReadOnly&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  role       = aws_iam_role.node.name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><code>[aws_iam_role](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/iam_role)</code> í…Œë¼í¼ ë¦¬ì†ŒìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ aws ì—­í• ì„ ìƒì„±í•©ë‹ˆë‹¤. </p><p>ì´í›„ <code>[aws_iam_role_policy_attachment](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/iam_role_policy_attachment)</code> í…Œë¼í¼ ë¦¬ì†ŒìŠ¤ë¥¼ í†µí•´ ìƒì„±í•œ aws ì—­í• ì— í•„ìš”í•œ ì •ì±…ì„ ì—°ê²°í•©ë‹ˆë‹¤.</p><p>í•´ë‹¹ ì—­í• ì— ì—°ê²°ë˜ëŠ” ì •ì±…ì€ <code>AmazonEKSWorkerNodePolicy</code>, <code>AmazonEKS_CNI_Policy</code> , <code>AmazonEC2ContainerRegistryReadOnly</code> ì…ë‹ˆë‹¤.</p><p>ì°¸ê³  ë ˆí¼ëŸ°ìŠ¤ </p><p><a href="https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/create-node-role.html" target="_blank" rel="noopener noreferrer">Amazon EKS ë…¸ë“œ IAM ì—­í• </a></p><p><a href="https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/cni-iam-role.html" target="_blank" rel="noopener noreferrer">ì„œë¹„ìŠ¤ ê³„ì •ì— IAM ì—­í• ì„ ì‚¬ìš©í•˜ë„ë¡ Amazon VPC CNI í”ŒëŸ¬ê·¸ì¸ êµ¬ì„±</a></p><p>ì •ì±… ìƒì„±í›„ EKS ë…¸ë“œ ê·¸ë£¹ì„ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><div class="codeBlockContainer_J+bg language-HCL theme-code-block"><div class="codeBlockContent_csEI HCL"><pre tabindex="0" class="prism-code language-HCL codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">resource &quot;aws_eks_node_group&quot; &quot;node-group&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  cluster_name    = aws_eks_cluster.aib-cluster.name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  node_group_name = &quot;aib-eks&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  node_role_arn   = aws_iam_role.node.arn</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  subnet_ids      = var.nodegroup_subnet_ids</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  scaling_config {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    desired_size = var.nodegroup_desired_size</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    max_size     = var.nodegroup_max_size</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    min_size     = var.nodegroup_min_size</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  disk_size      = var.nodegroup_disk_size</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  instance_types = var.nodegroup_instance_types</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  depends_on = [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    aws_iam_role_policy_attachment.node-AmazonEKSWorkerNodePolicy,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    aws_iam_role_policy_attachment.node-AmazonEKS_CNI_Policy,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    aws_iam_role_policy_attachment.node-AmazonEC2ContainerRegistryReadOnly,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><code>[aws_eks_node_group](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/eks_node_group)</code> í…Œë¼í¼ ë¦¬ì†ŒìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ë…¸ë“œê·¸ë£¹ì„ ì •ì˜í•©ë‹ˆë‹¤.</p><p>ë…¸ë“œê·¸ë£¹ì„ ì •ì˜í•˜ëŠ”ë° ì‚¬ìš©ë˜ëŠ” ì •ë³´</p><p><code>cluster_name</code> : EKS í´ëŸ¬ìŠ¤í„° ì´ë¦„, ë³€ìˆ˜ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤.</p><p><code>node_group_name</code> : ë…¸ë“œ ê·¸ë£¹ì˜ ì´ë¦„</p><p><code>node_role_arn</code> : ë…¸ë“œì˜ ì •ì±…, ìœ„ì—ì„œ ìƒì„±í•œ ì—­í• ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.</p><p><code>subnet_ids</code> : ì„œë¸Œë„· ì•„ì´ë””ë“¤, ë„¤íŠ¸ì›Œí¬ ëª¨ë“ˆë¡œ ìƒì„±ëœ ì„œë¸Œë„·ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.</p><p><code>scaling_config</code> : ë…¸ë“œì˜ ìŠ¤ì¼€ì¼ ì •ì˜</p><p><code>desired_size</code> : ì›Œì»¤ ë…¸ë“œì˜ ê°¯ìˆ˜</p><p><code>max_size</code> : ì›Œì»¤ ë…¸ë“œì˜ ìµœëŒ“ê°’</p><p><code>min_size</code> : ì›Œì»¤ ë…¸ë“œì˜ ìµœì†Ÿê°’</p><p><code>disk_size</code> : ì›Œì»¤ ë…¸ë“œì˜ ë””ìŠ¤í¬ ì‚¬ì´ì¦ˆ </p><p><code>instance_types</code> : ì›Œì»¤ ë…¸ë“œì˜ ì¸ìŠ¤í„´ìŠ¤ ì‚¬ì´ì¦ˆ, <code>t3.medium</code> ì´ ê¸°ë³¸ ê°’</p><p><code>depends_on</code> : ì›Œì»¤ ë…¸ë“œì™€ ì—°ê²°ë  ì •ì±…ë“¤, ìœ„ì—ì„œ ìƒì„±í•œ ì •ì±…ì„ ì—°ê²°í•´ì¤ë‹ˆë‹¤.</p><p>ì‚¬ìš©ë˜ëŠ” ëŒ€ë¶€ë¶„ì˜ ê°’ë“¤ì„ ë³€ìˆ˜ë¡œ ë°›ì•„ì„œ ì‚¬ìš©í•˜ê²Œ êµ¬ì„±í•˜ì˜€ìŠµë‹ˆë‹¤.</p><p>í•´ë‹¹ ëª¨ë“ˆ ì™¸ë¶€ì—ì„œ ì‰½ê²Œ ê°’ì„ í™•ì¸í•˜ê³  ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><p>ë…¸ë“œ ê·¸ë£¹ë“¤ì— ëŒ€í•´ì„œ ì •ì˜ë¥¼ í•˜ì˜€ë‹¤ë©´ EKSì— ëŒ€í•œ ì„¤ì •ì€ ëì…ë‹ˆë‹¤.</p><p>ë§ˆì§€ë§‰ìœ¼ë¡œëŠ” EKSë¡œ ìƒì„±ëœ ì¿ ë²„ë„¤í‹°ìŠ¤ ê´€ë¦¬ì— ì‚¬ìš©ë˜ëŠ” kubectlì„ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡
kubectlì˜ êµ¬ì„±ì„ ìœ„í•´ ì„¸ë¶€ ì—°ê²° ì •ë³´ë¥¼ ì œê³µí•˜ëŠ” ì‘ì—…ì´ í•„ìš”í•©ë‹ˆë‹¤.</p><aside>â“ kubectl?<p><a href="https://kubernetes.io/ko/docs/reference/kubectl/overview/" target="_blank" rel="noopener noreferrer">kubectl ê°œìš”</a></p><p>ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ë¥¼ ì œì–´í•  ìˆ˜ ìˆëŠ” ì»¤ë©˜ë“œ ë¼ì¸ ë„êµ¬ì…ë‹ˆë‹¤.
ì‚¬ìš©ì„ í•˜ê¸° ìœ„í•´ì„œëŠ” <a href="https://kubernetes.io/ko/docs/concepts/configuration/organize-cluster-access-kubeconfig/" target="_blank" rel="noopener noreferrer">kubeconfig</a> íŒŒì¼ì„ í†µí•´ ì¿ ë²„ë„¤í‹°ìŠ¤ì™€ kubectl ì—°ê²°ì´ í•„ìš”í•©ë‹ˆë‹¤.</p></aside><div class="codeBlockContainer_J+bg language-python theme-code-block"><div class="codeBlockContent_csEI python"><pre tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">resource </span><span class="token string" style="color:#e3116c">&quot;local_file&quot;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;kubeconfig&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  content  </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain">KUBECONFIG</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clusters</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> cluster</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    certificate</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">authority</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">aws_eks_cluster</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">aib</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">cluster</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">certificate_authority</span><span class="token punctuation" style="color:#393A34">.</span><span class="token number" style="color:#36acaa">0.</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">aws_eks_cluster</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">aib</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">cluster</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">endpoint</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">aws_eks_cluster</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">aib</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">cluster</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">arn</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">contexts</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> context</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cluster</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">aws_eks_cluster</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">aib</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">cluster</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">arn</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    user</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">aws_eks_cluster</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">aib</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">cluster</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">arn</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">aws_eks_cluster</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">aib</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">cluster</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">arn</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">current</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">context</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">aws_eks_cluster</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">aib</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">cluster</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">arn</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">preferences</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">users</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">aws_eks_cluster</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">aib</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">cluster</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">arn</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  user</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">exec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">authentication</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">k8s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">io</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> aws</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">iam</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">authenticator</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      args</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;token&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;-i&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;${aws_eks_cluster.aib-cluster.name}&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    KUBECONFIG</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  filename </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;kubeconfig&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><code>[local_file](https://registry.terraform.io/providers/hashicorp/local/latest/docs/resources/file)</code> í…Œë¼í¼ ë¦¬ì†ŒìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ìœ„ì—ì„œ ìƒì„±ëœ EKS ì •ë³´ë“¤ì„ ë°”íƒ•ìœ¼ë¡œ kubeconfigíŒŒì¼ì„ ì‘ì„±í•˜ê³  ë¡œì»¬ë¡œ ë‚´ë ¤ë°›ì„ ìˆ˜ ìˆë„ë¡ ì½”ë“œë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.</p><p><a href="https://kubernetes.io/ko/docs/tasks/access-application-cluster/configure-access-multiple-clusters/" target="_blank" rel="noopener noreferrer">ë‹¤ì¤‘ í´ëŸ¬ìŠ¤í„° ì ‘ê·¼ êµ¬ì„±</a></p><p>ìœ„ ë ˆí¼ëŸ°ìŠ¤ë¥¼ í†µí•´ì„œ <code>kubectl</code> ì—ì„œ ì‚¬ìš©í•˜ëŠ” <code>kubeconfig</code> íŒŒì¼ì„ ìƒì„±í•˜ëŠ” ë°©ë²•ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="variabletf"><code>variable.tf</code><a class="hash-link" href="#variabletf" title="Direct link to heading">â€‹</a></h3><blockquote><p>ìœ„ <code>main.tf</code> íŒŒì¼ì—ì„œ ì‚¬ìš©í•œ ë³€ìˆ˜ë“¤ì„ ì—¬ê¸°ì„œ ì •ì˜í•©ë‹ˆë‹¤.</p></blockquote><div class="codeBlockContainer_J+bg language-HCL theme-code-block"><div class="codeBlockContent_csEI HCL"><pre tabindex="0" class="prism-code language-HCL codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">variable &quot;aws_region&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  description = &quot;AWS region ID for deployment (e.g. ap-northeast-2)&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type        = string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  default     = &quot;ap-northeast-2&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">variable &quot;env_name&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type = string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">variable &quot;cluster_name&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type = string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">variable &quot;vpc_id&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type = string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">variable &quot;cluster_subnet_ids&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type = list(string)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">variable &quot;nodegroup_subnet_ids&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type = list(string)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">variable &quot;nodegroup_desired_size&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type    = number</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  default = 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">variable &quot;nodegroup_min_size&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type    = number</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  default = 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">variable &quot;nodegroup_max_size&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type    = number</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  default = 5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">variable &quot;nodegroup_disk_size&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type = string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">variable &quot;nodegroup_instance_types&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type = list(string)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="eks-ëª¨ë“ˆ-ì‚¬ìš©">EKS ëª¨ë“ˆ ì‚¬ìš©<a class="hash-link" href="#eks-ëª¨ë“ˆ-ì‚¬ìš©" title="Direct link to heading">â€‹</a></h3><p>EKS ëª¨ë“ˆì„ êµ¬ì„±í–ˆë‹¤ë©´ ì´ì œ ì™¸ë¶€ì—ì„œ ì‚¬ìš©í•´ì•¼í•©ë‹ˆë‹¤.</p><p>ì´ì „ í…Œë¼í¼ ë°±ì—”ë“œë¥¼ ì„ ì–¸í–ˆë˜ <code>main.tf</code> íŒŒì¼ì—ì„œ ë„¤íŠ¸ì›Œí¬ ëª¨ë“ˆì„ ì‚¬ìš©í•´ì¤ë‹ˆë‹¤.</p><p><code>variable.tf</code> íŒŒì¼ì— ì„ ì–¸ë˜ì–´ìˆëŠ” ë³€ìˆ˜ë“¤ì— ê°’ì„ ì „ë¶€ ë„£ì–´ì£¼ì–´ì•¼í•©ë‹ˆë‹¤.</p><div class="codeBlockContainer_J+bg language-HCL theme-code-block"><div class="codeBlockContent_csEI HCL"><pre tabindex="0" class="prism-code language-HCL codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">module &quot;aws-kubernetes-cluster&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  source = &quot;./eks_module&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  env_name           = local.name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  aws_region         = local.region</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  cluster_name       = local.k8s_cluster_name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  vpc_id             = module.aws-network.vpc_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  cluster_subnet_ids = module.aws-network.subnet_ids</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  nodegroup_subnet_ids     = module.aws-network.private_subnet_ids</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  nodegroup_disk_size      = &quot;20&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  nodegroup_instance_types = [&quot;t3.medium&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  nodegroup_desired_size   = 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  nodegroup_min_size       = 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  nodegroup_max_size       = 5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>ë””ìŠ¤í¬ ì‚¬ì´ì¦ˆëŠ” 20GB, ë…¸ë“œê·¸ë£¹ì˜ ì¸ìŠ¤í„´ìŠ¤ íƒ€ì…ì€ ê¸°ë³¸ê°’ì¸ <code>t3.medium</code> ì„ ì‚¬ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.</p><p>ë…¸ë“œê·¸ë£¹ì˜ ì‚¬ì´ì¦ˆëŠ” 2, ìµœì†Ÿê°’1, ìµœëŒ“ê°’ì€ 5ë¡œ êµ¬ì„±í•˜ì˜€ìŠµë‹ˆë‹¤.</p><p>ì¶”í›„ <a href="https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/cluster-autoscaler.html" target="_blank" rel="noopener noreferrer">autoscaler</a> ì¶”ê°€ë¥¼ í†µí•´ EKSì—ì„œ ë…¸ë“œê·¸ë£¹ì˜ ì‚¬ì´ì¦ˆë¥¼ ì ì ˆí•˜ê²Œ ì¡°ì ˆí•  ìˆ˜ ìˆë„ë¡ êµ¬ì„±í•˜ë ¤í•©ë‹ˆë‹¤.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="ë§ˆë¬´ë¦¬">ë§ˆë¬´ë¦¬<a class="hash-link" href="#ë§ˆë¬´ë¦¬" title="Direct link to heading">â€‹</a></h3><p>ìœ„ì— ìˆëŠ” í…Œë¼í¼ ì½”ë“œë¥¼ ì „ë¶€ ì‘ì„±í•˜ì˜€ë‹¤ë©´ í…Œë¼í¼ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•  ì°¨ë¡€ì…ë‹ˆë‹¤.</p><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">terraform </span><span class="token function" style="color:#d73a49">fmt</span><span class="token plain"> </span><span class="token builtin class-name">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">terraform init</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">terraform validate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">terraform plan</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>ì½”ë“œ í…ŒìŠ¤íŠ¸ í›„ ë¬¸ì œê°€ ì—†ë‹¤ëŠ” ê²ƒì„ í™•ì¸í•˜ì˜€ë‹¤ë©´ applyë¥¼ í•´ì¤ë‹ˆë‹¤</p><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">terraform apply</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>í…Œë¼í¼ì´ ì‹¤í–‰ëœ í›„ í´ëŸ¬ìŠ¤í„°ê°€ ì •ìƒì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆëŠ”ì§€ í™•ì¸í•´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">aws eks list-clusters</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-tags-row row margin-bottom--sm"><div class="col"><b>Tags:</b><ul class="tags_NBRY padding--none margin-left--sm"><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/til/docs/tags/aws">AWS</a></li><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/til/docs/tags/eks">EKS</a></li><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/til/docs/tags/terraform">Terraform</a></li><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/til/docs/tags/datahub-with-eks">Datahub with EKS</a></li></ul></div></div><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://wonjun0120/github.io/til/docs/docs/Datahub with EKS/TerraformEKSModule.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/til/docs/Datahub with EKS/terraform_network_module"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">EKS Datahub 3 Terraform Network Module</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/til/docs/Datahub with EKS/terraform_argocd_module"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">EKS Datahub 5 Terraform ArgoCD Module</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#ë˜í¼ëŸ°ìŠ¤" class="table-of-contents__link toc-highlight">ë˜í¼ëŸ°ìŠ¤</a></li><li><a href="#eksë¥¼-ì‹œì‘í•˜ê¸°-ì „ì—" class="table-of-contents__link toc-highlight">EKSë¥¼ ì‹œì‘í•˜ê¸° ì „ì—..</a></li><li><a href="#ëª¨ë“ˆ-ìƒì„±" class="table-of-contents__link toc-highlight">ëª¨ë“ˆ ìƒì„±</a></li><li><a href="#outputtf" class="table-of-contents__link toc-highlight"><code>output.tf</code></a></li><li><a href="#maintf" class="table-of-contents__link toc-highlight"><code>main.tf</code></a></li><li><a href="#variabletf" class="table-of-contents__link toc-highlight"><code>variable.tf</code></a></li><li><a href="#eks-ëª¨ë“ˆ-ì‚¬ìš©" class="table-of-contents__link toc-highlight">EKS ëª¨ë“ˆ ì‚¬ìš©</a></li><li><a href="#ë§ˆë¬´ë¦¬" class="table-of-contents__link toc-highlight">ë§ˆë¬´ë¦¬</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/til/docs/intro">Project Logs</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/til/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/wonjun0120" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 wonjun0120, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/til/assets/js/runtime~main.808d207f.js"></script>
<script src="/til/assets/js/main.4442a007.js"></script>
</body>
</html>