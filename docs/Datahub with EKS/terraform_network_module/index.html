<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<link rel="alternate" type="application/rss+xml" href="/til/blog/rss.xml" title="Wonjun&#39;s Today I Learned RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/til/blog/atom.xml" title="Wonjun&#39;s Today I Learned Atom Feed"><title data-react-helmet="true">EKS Datahub 3 Terraform Network Module | Wonjun&#x27;s Today I Learned</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://wonjun0120/github.io/til/docs/Datahub with EKS/terraform_network_module"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="EKS Datahub 3 Terraform Network Module | Wonjun&#x27;s Today I Learned"><meta data-react-helmet="true" name="description" content="Tags: aib-datateam, aws, datahub, eks, engineering-log, kubernetes, terraform, traefik"><meta data-react-helmet="true" property="og:description" content="Tags: aib-datateam, aws, datahub, eks, engineering-log, kubernetes, terraform, traefik"><link data-react-helmet="true" rel="icon" href="/til/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://wonjun0120/github.io/til/docs/Datahub with EKS/terraform_network_module"><link data-react-helmet="true" rel="alternate" href="https://wonjun0120/github.io/til/docs/Datahub with EKS/terraform_network_module" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://wonjun0120/github.io/til/docs/Datahub with EKS/terraform_network_module" hreflang="x-default"><link rel="stylesheet" href="/til/assets/css/styles.8d002642.css">
<link rel="preload" href="/til/assets/js/runtime~main.2dd48f90.js" as="script">
<link rel="preload" href="/til/assets/js/main.7dcddf2a.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/til/"><b class="navbar__title">Wonjun&#x27;s TIL</b></a><a class="navbar__item navbar__link navbar__link--active" href="/til/docs/intro">Project Logs</a><a class="navbar__item navbar__link" href="/til/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/wonjun0120" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ğŸŒœ</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ğŸŒ</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/til/docs/intro">Project Log</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_TwRn" href="/til/docs/Datahub with EKS/aws_setting">Datahub with EKS</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/til/docs/Datahub with EKS/aws_setting">EKS Datahub 1 AWS Setting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/til/docs/Datahub with EKS/terraform_basic_setting">EKS Datahub 2 Terraform ì´ˆê¸° ì„¸íŒ…</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/til/docs/Datahub with EKS/terraform_network_module">EKS Datahub 3 Terraform Network Module</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/til/docs/Datahub with EKS/terraform_eks_module">EKS Datahub 4 Terraform EKS Module</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/til/docs/Datahub with EKS/terraform_argocd_module">EKS Datahub 5 Terraform ArgoCD Module</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/til/docs/Datahub with EKS/argocd_deploy">EKS Datahub 6 ArgoCDë¡œ Datahub ë°°í¬</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>EKS - Datahub - 3 Terraform Network Module</h1></header><p>Tags: aib-datateam, aws, datahub, eks, engineering-log, kubernetes, terraform, traefik</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="ë˜í¼ëŸ°ìŠ¤">ë˜í¼ëŸ°ìŠ¤<a class="hash-link" href="#ë˜í¼ëŸ°ìŠ¤" title="Direct link to heading">â€‹</a></h3><p>ì—¬ê¸°ì„œë¶€í„°ëŠ” ì•„ë˜ ì±…ì„ ë°”íƒ•ìœ¼ë¡œ ì§„í–‰í•˜ì˜€ìŠµë‹ˆë‹¤. </p><p><a href="http://www.yes24.com/Product/Goods/102805240" target="_blank" rel="noopener noreferrer">ì²˜ìŒ ì‹œì‘í•˜ëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ - YES24</a></p><p>Terraform, EKS, Traefik, Argocd ë“± ì „ë°˜ì ìœ¼ë¡œ ë‹¤ ì•Œë ¤ì£¼ê³  ìˆìŠµë‹ˆë‹¤!
í˜¹ì‹œë‚˜ ê´€ì‹¬ìˆìœ¼ì‹  ë¶„ë“¤ì€ ê¼­ ì½ì–´ë³´ì‹œëŠ” ê²ƒì„ ì¶”ì²œë“œë¦½ë‹ˆë‹¤!</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="network-ë“¤ì–´ê°€ê¸°-ì•ì„œ">Network ë“¤ì–´ê°€ê¸° ì•ì„œ..<a class="hash-link" href="#network-ë“¤ì–´ê°€ê¸°-ì•ì„œ" title="Direct link to heading">â€‹</a></h3><p>EKSë¥¼ ë³¸ê²©ì ìœ¼ë¡œ ìƒì„±í•˜ê¸° ì „ì— EKSì— ëŒ€í•´ì„œ VPCë¥¼ ìƒì„±í•´ì£¼ì–´ì•¼í•©ë‹ˆë‹¤. </p><p>VPCë€ Virtual Private Cloud, ê°€ìƒ ì‚¬ì„¤ í´ë¼ìš°ë“œì…ë‹ˆë‹¤. </p><p>VPC ê°œë…ì€ ì•„ë˜ ë˜í¼ëŸ°ìŠ¤ ì°¸ê³ í•´ì£¼ì„¸ìš”.</p><p><a href="https://medium.com/harrythegreat/aws-%EA%B0%80%EC%9E%A5%EC%89%BD%EA%B2%8C-vpc-%EA%B0%9C%EB%85%90%EC%9E%A1%EA%B8%B0-71eef95a7098" target="_blank" rel="noopener noreferrer">[AWS] ê°€ì¥ì‰½ê²Œ VPC ê°œë…ì¡ê¸°</a></p><p>ì œì¼ ì´í•´í•˜ê¸° ì‰¬ì› ë˜ VPC ì„¤ëª…ì…ë‹ˆë‹¤.</p><p><a href="https://www.44bits.io/ko/post/understanding_aws_vpc" target="_blank" rel="noopener noreferrer">ë§Œë“¤ë©´ì„œ ë°°ìš°ëŠ” ì•„ë§ˆì¡´ VPC(Amazon VPC) ì…ë¬¸: AWS ë„¤íŠ¸ì›Œí¬ì˜ ê¸°ì´ˆ</a></p><p>EKSë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•œ VPC ë ˆí¼ëŸ°ìŠ¤ë“¤ ì…ë‹ˆë‹¤. </p><p><a href="https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/create-public-private-vpc.html" target="_blank" rel="noopener noreferrer">Amazon EKS í´ëŸ¬ìŠ¤í„°ì— ëŒ€í•´ VPC ìƒì„±</a></p><p><a href="https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/network_reqs.html" target="_blank" rel="noopener noreferrer">í´ëŸ¬ìŠ¤í„° VPC ê³ ë ¤ ì‚¬í•­</a></p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="network-with-terraform">Network with Terraform<a class="hash-link" href="#network-with-terraform" title="Direct link to heading">â€‹</a></h3><p>ì´ì œ í…Œë¼í¼ìœ¼ë¡œ VPCë¥¼ ìƒì„±í•´ì£¼ë ¤ê³  í•©ë‹ˆë‹¤. </p><p>ìœ ì§€ë³´ìˆ˜ë¥¼ ìœ„í•´ ì´ì „ì— ë§Œë“  <code>[main.tf](http://main.tf)</code> íŒŒì¼ì—ëŠ” ë„ˆë¬´ ë§ì€ ì½”ë“œê°€ ë“¤ì–´ê°€ì§€ ì•Šë„ë¡ ê° ì„¤ì •ë§ˆë‹¤ ëª¨ë“ˆë¡œ ê´€ë¦¬í•˜ë ¤í•©ë‹ˆë‹¤. </p><p>VPC ê´€ë ¨ ëª¨ë“ˆ, EKSê´€ë ¨ ëª¨ë“ˆê³¼ ê°™ì´ ê´€ë¦¬ë¥¼ í†µí•´ ê°€ë…ì„±ì„ ë†’ì´ê³ , ìœ ì§€ë³´ìˆ˜ì„±ì„ ë†’ì´ë ¤í•©ë‹ˆë‹¤.</p><p>VPC ëª¨ë“ˆë¡œ <code>network_module</code> ì´ë¼ëŠ” ì´ë¦„ì˜ í´ë”ë¥¼ ìƒì„±í•´ì£¼ì—ˆìŠµë‹ˆë‹¤. </p><p>í…Œë¼í¼ ëª¨ë“ˆì„ 3ê°œì˜ íŒŒì¼ë¡œ ê´€ë¦¬í•˜ë ¤í•©ë‹ˆë‹¤. </p><p><code>main.tf</code> : ëª¨ë“ˆì´ ì‹¤í–‰ë˜ëŠ” íŒŒì¼</p><p><code>variables.tf</code> : ëª¨ë“ˆì˜ inputê°’ì„ ê´€ë¦¬í•˜ëŠ” íŒŒì¼</p><p><code>outputs.tf</code> :ëª¨ë“ˆì˜ outputê°’ì„ ê´€ë¦¬í•˜ëŠ” íŒŒì¼, ë§Œì•½ outputì´ ì—†ëŠ” ê²½ìš° í•´ë‹¹ íŒŒì¼ ìƒì„±ì„ í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><p>í•´ë‹¹ ëª¨ë“ˆì„ í†µí•´ ê°€ìš©ì˜ì—­ì€ 2ê°œ, ê° ê°€ìš©ì˜ì—­ë³„ë¡œ ê³µê°œ, ë¹„ê³µê°œ ì„œë¸Œë„·ì„ í•˜ë‚˜ì”© ìƒì„±í•˜ì—¬ ì´ 4ê°œì˜ ì„œë¸Œë„·ìœ¼ë¡œ êµ¬ì„±ëœ VPCë¥¼ ìƒì„±í•˜ë ¤í•©ë‹ˆë‹¤.</p><p>2ê°œì˜ ê°€ìš©ì˜ì—­ì„ êµ¬ì„±í•˜ëŠ” ì´ìœ ëŠ” AWS EKS ê³µì‹ë¬¸ì„œì˜ <a href="https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/network_reqs.html" target="_blank" rel="noopener noreferrer">í´ëŸ¬ìŠ¤í„° VPC ê³ ë ¤ì‚¬í•­</a>ì¤‘ </p><blockquote><p>Amazon EKS í´ëŸ¬ìŠ¤í„°ë¥¼ ìƒì„±í•  ë•Œ Amazon EKSê°€ íƒ„ë ¥ì  ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ë¥¼ ë°°ì¹˜í•  ìˆ˜ ìˆëŠ” VPC ì„œë¸Œë„·ì„ ì§€ì •í•©ë‹ˆë‹¤. <strong>Amazon EKSëŠ” ìµœì†Œ 2ê°œì˜ ê°€ìš© ì˜ì—­ì— ì„œë¸Œë„·ì´ í•„ìš”í•˜ë©°, ë…¸ë“œì™€ì˜ ì œì–´ í”Œë ˆì¸ í†µì‹ ì„ ìš©ì´í•˜ê²Œ í•˜ê¸° ìœ„í•´ ì´ëŸ¬í•œ ì„œë¸Œë„·ì— ìµœëŒ€ 4ê°œì˜ ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.</strong></p></blockquote><p>ë¼ëŠ” ë¬¸êµ¬ê°€ ìˆì–´ 2ê°œì˜ ê°€ìš©ì˜ì—­ì„ ìƒì„±í•´ì£¼ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. </p><p>ì¡°ê¸ˆ ë” ìì„¸í•œ EKS VPC ë„¤íŠ¸ì›Œí¬ëŠ” ì¶”í›„ì— ë” ê³µë¶€í•˜ë ¤í•©ë‹ˆë‹¤.</p><p>í…Œë¼í¼ìœ¼ë¡œ AWS VPCë¥¼ ìƒì„±í•´ì•¼í•˜ë¯€ë¡œ AWS VPC Terraform moduleì„ ì‚¬ìš©í•©ë‹ˆë‹¤. </p><p>AWS VPC Terraform module ê³µì‹ë¬¸ì„œ</p><p><a href="https://registry.terraform.io/modules/terraform-aws-modules/vpc/aws/latest" target="_blank" rel="noopener noreferrer"></a></p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="outputtf"><code>output.tf</code><a class="hash-link" href="#outputtf" title="Direct link to heading">â€‹</a></h3><blockquote><p>ì—¬ê¸°ì„œëŠ” network_moduleì„ í†µí•´ ìƒì„±ë˜ëŠ” VPCì˜ idì™€ subnetì˜ idë¥¼ ëª¨ë“ˆì˜ ê²°ê³¼ë¡œ ë°˜í™˜í•  ìˆ˜ ìˆë„ë¡ ì‘ì„±í•´ì¤ë‹ˆë‹¤.</p></blockquote><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">output </span><span class="token string" style="color:#e3116c">&quot;vpc_id&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># ëª¨ë“ˆë¡œ ìƒì„±ëœ vpc idì…ë‹ˆë‹¤</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> aws_vpc.main.id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">output </span><span class="token string" style="color:#e3116c">&quot;subnet_ids&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># ëª¨ë“ˆë¡œ ìƒì„±ëœ subnetì˜ idsì…ë‹ˆë‹¤</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    aws_subnet.public-subnet-a.id,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    aws_subnet.public-subnet-b.id,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    aws_subnet.private-subnet-a.id,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  aws_subnet.private-subnet-b.id</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">output </span><span class="token string" style="color:#e3116c">&quot;public_subnet_ids&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># ëª¨ë“ˆë¡œ ìƒì„±ëœ ê³µê°œ subnetì˜ idsì…ë‹ˆë‹¤</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">aws_subnet.public-subnet-a.id, aws_subnet.public-subnet-b.id</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">output </span><span class="token string" style="color:#e3116c">&quot;private_subnet_ids&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># ëª¨ë“ˆë¡œ ìƒì„±ëœ ë¹„ê³µê°œ subnetì˜ idsì…ë‹ˆë‹¤</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">aws_subnet.private-subnet-a.id, aws_subnet.private-subnet-b.id</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="maintf"><code>main.tf</code><a class="hash-link" href="#maintf" title="Direct link to heading">â€‹</a></h3><blockquote><p>network_moduleì´ ì‹¤ì§ˆì ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ” íŒŒì¼ì…ë‹ˆë‹¤.
ì½”ë“œê°€ ê¸¸ì–´ ë¶€ë¶„ë³„ë¡œ ì˜ë¼ì„œ ë³¸ë¬¸ì— ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.</p></blockquote><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">provider </span><span class="token string" style="color:#e3116c">&quot;aws&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  region </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> var.aws_region</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">## AWS VPC ì •ì˜</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">resource </span><span class="token string" style="color:#e3116c">&quot;aws_vpc&quot;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;main&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  cidr_block           </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> var.main_vpc_cidr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  enable_dns_support   </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  enable_dns_hostnames </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  tags </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;Name&quot;</span><span class="token plain">                                      </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> var.vpc_name,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;kubernetes.io/cluster/</span><span class="token string variable" style="color:#36acaa">${var.cluster_name}</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;shared&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>AWS ê³µê¸‰ì ì„ ì–¸ìœ¼ë¡œë¶€í„° ì‹œì‘í•©ë‹ˆë‹¤. ê³µê¸‰ìë¥¼ ì„ ì–¸í•˜ëŠ” ê²½ìš° í…Œë¼í¼ì´ ì‘ì—…ì„ ì§„í–‰í•  AWS ë¦¬ì „ì´ ìˆì–´ì•¼í•©ë‹ˆë‹¤. </p><p>ì—¬ê¸°ì„œëŠ” <code>variable.tf</code> íŒŒì¼ì„ í†µí•œ inputê°’ì— ë§ì¶”ì–´ ì§€ì •í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.</p><p>ë‹¤ìŒì€ VPCë¥¼ ìƒì„±í•˜ê¸° ìœ„í•œ ì½”ë“œë¥¼ ì •ì˜í•©ë‹ˆë‹¤. </p><p>ì—¬ê¸°ì„œëŠ” ì‚¬ì´ë” ë¸”ë¡ê³¼ íƒœê·¸ë¥¼ ì§€ì •í•©ë‹ˆë‹¤. </p><aside>â“ CIDR(ì‚¬ì´ë”)ë€?<p><a href="https://ko.wikipedia.org/wiki/%EC%82%AC%EC%9D%B4%EB%8D%94_(%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%82%B9)" target="_blank" rel="noopener noreferrer">ì‚¬ì´ë” (ë„¤íŠ¸ì›Œí‚¹) - ìœ„í‚¤ë°±ê³¼, ìš°ë¦¬ ëª¨ë‘ì˜ ë°±ê³¼ì‚¬ì „</a></p><p>ë„¤íŠ¸ì›Œí¬ë‚˜ ì„œë¸Œë„·ì—ì„œ í—ˆìš©í•˜ëŠ” IP ì£¼ì†Œë¥¼ ì •ì˜í•˜ëŠ” ì¶•ì•½í˜• ë¬¸ìì—´ë¡œ ë„¤íŠ¸ì›Œí¬ IP ì£¼ì†Œ ë²”ìœ„ë¥¼ ì„¤ëª…í•˜ëŠ” í‘œì¤€ ë°©ë²•ì…ë‹ˆë‹¤.</p></aside><p>ì‚¬ì´ë” ë¸”ë¡ë„ ì™¸ë¶€ì—ì„œ ê°’ì„ ë°›ì•„ ì§€ì •í•  ìˆ˜ ìˆë„ë¡ ë³€ìˆ˜ë¥¼ í™œìš©í•©ë‹ˆë‹¤.</p><p>AWSëŠ” VPCìš© DNSì„œë²„ë¥¼ ì§€ì›í•©ë‹ˆë‹¤. (Route 53 Resolver)</p><p><a href="https://docs.aws.amazon.com/ko_kr/vpc/latest/userguide/vpc-dns.html" target="_blank" rel="noopener noreferrer">VPCì— ëŒ€í•œ DNS ì§€ì›</a></p><p><code>enable_dns_support</code> : ê¸°ë³¸ VPCì—ì„œ DNS í˜¸ìŠ¤íŠ¸ ì´ë¦„ì„ í™œì„±í™”</p><p><code>enable_dns_hostnames</code> : ê¸°ë³¸ VPCì—ì„œ DNS ì§€ì›ì„ í™œì„±í™”</p><p>íƒœê·¸ë¥¼ ì§€ì •í•˜ëŠ” ì´ìœ ëŠ” íƒœê·¸ ì¶”ê°€ë¥¼ í†µí•´ ë¦¬ì†ŒìŠ¤ ê·¸ë£¹ì„ ì‰½ê²Œ ì‹ë³„í•˜ê³  ê´€ë¦¬í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. </p><p>VPCë¥¼ ì‰½ê²Œ ì‹ë³„í•  ìˆ˜ ìˆë„ë¡ Name íƒœê·¸ë¥¼ ì •ì˜í•˜ê³ , ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ë¥¼ ì‹ë³„í•˜ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ íƒœê·¸ë„ ì •ì˜í•©ë‹ˆë‹¤. </p><p>VPCìš© DNSì„œë²„ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ í™œì„±í™” ì˜µì…˜ì„ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.</p><p>ì—¬ê¸°ì„œ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ë„ë©”ì¸ì„ ìƒì„±í•´ì¤ë‹ˆë‹¤.</p><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">resource </span><span class="token string" style="color:#e3116c">&quot;aws_route53_zone&quot;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;private-zone&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name          </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">${var.name}</span><span class="token string" style="color:#e3116c">.</span><span class="token string variable" style="color:#36acaa">${var.vpc_name}</span><span class="token string" style="color:#e3116c">.com&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  force_destroy </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  vpc </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    vpc_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> aws_vpc.main.id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><code>[aws_route53_zone](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/route53_zone)</code> í…Œë¼í¼ ë¦¬ì†ŒìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ë„ë©”ì¸ì„ ìƒì„±í•©ë‹ˆë‹¤.</p><p>ë‹¤ìŒì€ ì„œë¸Œë„· ì •ì˜ì…ë‹ˆë‹¤.</p><p><code>output.tf</code> ì— ì„ ì–¸ëœ ê²ƒê³¼ ê°™ì´ ì´ 4ê°œì˜ ì„œë¸Œë„·ì„ êµ¬ì„±í•´ì•¼í•©ë‹ˆë‹¤. </p><p>í…Œë¼í¼ aws subnet ëª¨ë“ˆ</p><p><a href="https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/subnet" target="_blank" rel="noopener noreferrer"></a></p><p>ì„œë¸Œë„·ì„ êµ¬ì„±í•˜ëŠ”ë° í•„ìš”í•œ ê°’ì€ <code>vpc_id</code> , <code>cidr_block</code>, <code>availability_zone</code> ì…ë‹ˆë‹¤. </p><p><code>vpc_id</code> : ì„œë¸Œë„·ì´ ì†í•  VPCì˜ idì…ë‹ˆë‹¤, ìœ„ ì½”ë“œë¥¼ í†µí•´ ìƒì„±ëœ VPC idë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤</p><p><code>cidr_block</code> : ê° ì„œë¸Œë„· ë³„ë¡œ ì§€ì •ì´ í•„ìš”í•©ë‹ˆë‹¤, ì™¸ë¶€ì—ì„œ ê°’ì„ ë°›ì•„ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ë³€ìˆ˜ë¥¼ í™œìš©í•©ë‹ˆë‹¤.</p><p><code>availability_zone</code> : 2ê°œì˜ ê°€ìš©ì˜ì—­ì„ ì‚¬ìš©í•˜ì—¬ ê° ê°€ìš©ì˜ì—­ë³„ë¡œ 2ê°œì˜ ì„œë¸Œë„·ì„ êµ¬ì„±í•  ì˜ˆì •ì´ê¸° ë•Œë¬¸ì—
ê°€ìš©ì˜ì—­ì„ ì„œë¸Œë„·ë³„ë¡œ ë”°ë¡œ ì§€ì •í•´ì£¼ì–´ì•¼í•©ë‹ˆë‹¤.</p><p>ì´ë¥¼ êµ¬í˜„í•˜ê¸° ìœ„í•´ì„œëŠ” ê°€ìš©ì˜ì—­ì— ëŒ€í•œ ì •ë³´ê°€ í•„ìš”í•©ë‹ˆë‹¤.</p><p><a href="https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/availability_zones" target="_blank" rel="noopener noreferrer"></a></p><p><code>aws_availability_zones</code> í…Œë¼í¼ ë°ì´í„° ì†ŒìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ê°€ìš©ì˜ì—­ì„ ë°›ì•„ì™€ ì‚¬ìš©í•©ë‹ˆë‹¤.</p><p>í•´ë‹¹ ë°ì´í„° ì†ŒìŠ¤ë¥¼ í†µí•´ ë°›ì•„ì˜¨ ê°€ìš©ì˜ì—­ 0ë²ˆì§¸ ì¸ë±ìŠ¤ëŠ” subnet-a, 1ë²ˆì§¸ ì¸ë±ìŠ¤ëŠ” subnet-bë¡œ í™œìš©í•©ë‹ˆë‹¤.</p><p>ì½”ë“œë¡œ í™•ì¸í•˜ë©´ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.</p><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">data </span><span class="token string" style="color:#e3116c">&quot;aws_availability_zones&quot;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;available&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  state </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;available&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">resource </span><span class="token string" style="color:#e3116c">&quot;aws_subnet&quot;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;public-subnet-a&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  vpc_id            </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> aws_vpc.main.id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  cidr_block        </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> var.public_subnet_a_cidr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  availability_zone </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> data.aws_availability_zones.available.names</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  tags </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;Name&quot;</span><span class="token plain">                                      </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">${var.vpc_name}</span><span class="token string" style="color:#e3116c">-public-subnet-a&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;kubernetes.io/cluster/</span><span class="token string variable" style="color:#36acaa">${var.cluster_name}</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;shared&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;kubernetes.io/role/elb&quot;</span><span class="token plain">                    </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">resource </span><span class="token string" style="color:#e3116c">&quot;aws_subnet&quot;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;public-subnet-b&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  vpc_id            </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> aws_vpc.main.id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  cidr_block        </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> var.public_subnet_b_cidr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  availability_zone </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> data.aws_availability_zones.available.names</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  tags </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;Name&quot;</span><span class="token plain">                                      </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">${var.vpc_name}</span><span class="token string" style="color:#e3116c">-public-subnet-b&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;kubernetes.io/cluster/</span><span class="token string variable" style="color:#36acaa">${var.cluster_name}</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;shared&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;kubernetes.io/role/elb&quot;</span><span class="token plain">                    </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">resource </span><span class="token string" style="color:#e3116c">&quot;aws_subnet&quot;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;private-subnet-a&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  vpc_id            </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> aws_vpc.main.id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  cidr_block        </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> var.private_subnet_a_cidr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  availability_zone </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> data.aws_availability_zones.available.names</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  tags </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;Name&quot;</span><span class="token plain">                                      </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">${var.vpc_name}</span><span class="token string" style="color:#e3116c">-private-subnet-a&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;kubernetes.io/cluster/</span><span class="token string variable" style="color:#36acaa">${var.cluster_name}</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;shared&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;kubernetes.io/role/internal-elb&quot;</span><span class="token plain">           </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">resource </span><span class="token string" style="color:#e3116c">&quot;aws_subnet&quot;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;private-subnet-b&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  vpc_id            </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> aws_vpc.main.id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  cidr_block        </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> var.private_subnet_b_cidr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  availability_zone </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> data.aws_availability_zones.available.names</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  tags </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;Name&quot;</span><span class="token plain">                                      </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">${var.vpc_name}</span><span class="token string" style="color:#e3116c">-private-subnet-b&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;kubernetes.io/cluster/</span><span class="token string variable" style="color:#36acaa">${var.cluster_name}</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;shared&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;kubernetes.io/role/internal-elb&quot;</span><span class="token plain">           </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>ê´€ë¦¬ìì™€ ìš´ì˜ì ì½˜ì†”ì„ í†µí•´ì„œ ë„¤íŠ¸ì›Œí¬ ë¦¬ì†ŒìŠ¤ë¥¼ ì‰½ê²Œ ì°¾ì„ ìˆ˜ ìˆë„ë¡ Name íƒœê·¸ë¥¼ ì¶”ê°€í•´ì¤ë‹ˆë‹¤.</p><p>EKSì—ì„œ ë„¤íŠ¸ì›Œí¬ ë¡œë“œ ë°¸ëŸ°ì‹±ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ íƒœê·¸ë¥¼ ì‚¬ìš©í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.</p><p>ì´ì— ëŒ€í•œ ì„¤ëª…ì€ ì•„ë˜ ê³µì‹ë¬¸ì„œì—ì„œ ìì„¸í•˜ê²Œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤</p><p><a href="https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/network-load-balancing.html" target="_blank" rel="noopener noreferrer">Amazon EKSì˜ ë„¤íŠ¸ì›Œí¬ ë¡œë“œ ë°¸ëŸ°ì‹±</a></p><p>4ê°œì˜ ì„œë¸Œë„·ì„ êµ¬ì„±í•œ ë’¤ì—ëŠ” AWSê°€ íŠ¸ë˜í”½ì„ ê´€ë¦¬í•˜ëŠ”ë° í•„ìš”í•œ ë„¤íŠ¸ì›Œí¬ ê·œì¹™ì„ ì •ì˜í•´ì•¼í•©ë‹ˆë‹¤. </p><p>ì„œë¸Œë„·ì— í—ˆìš©í•  íŠ¸ë˜í”½ ì†ŒìŠ¤ë¥¼ ì •ì˜í•˜ëŠ” ë¼ìš°íŒ… í…Œì´ë¸”ì„ ì„¤ì •í•˜ë ¤í•©ë‹ˆë‹¤. </p><p><a href="https://ko.wikipedia.org/wiki/%EB%9D%BC%EC%9A%B0%ED%8C%85_%ED%85%8C%EC%9D%B4%EB%B8%94" target="_blank" rel="noopener noreferrer">ë¼ìš°íŒ… í…Œì´ë¸” - ìœ„í‚¤ë°±ê³¼, ìš°ë¦¬ ëª¨ë‘ì˜ ë°±ê³¼ì‚¬ì „</a></p><p>ë¨¼ì € ë‘ ê³µê°œ ì„œë¸Œë„·ì— ëŒ€í•œ ë¼ìš°íŒ… ê·œì¹™ì„ ì •ì˜í•©ë‹ˆë‹¤.</p><p>ì¸í„°ë„·ì—ì„œ ì„œë¸Œë„·ì— ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ í•˜ê¸° ìœ„í•´ì„œëŠ” ì¸í„°ë„· ê²Œì´íŠ¸ì›¨ì´ë¥¼ ì‚¬ìš©í•´ì•¼í•©ë‹ˆë‹¤.</p><p>aws ì¸í„°ë„· ê²Œì´íŠ¸ì›¨ì´ ê³µì‹ë¬¸ì„œ</p><p><a href="https://docs.aws.amazon.com/ko_kr/vpc/latest/userguide/VPC_Internet_Gateway.html" target="_blank" rel="noopener noreferrer">ì¸í„°ë„· ê²Œì´íŠ¸ì›¨ì´</a></p><div class="codeBlockContainer_J+bg language-HCL theme-code-block"><div class="codeBlockContent_csEI HCL"><pre tabindex="0" class="prism-code language-HCL codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">resource &quot;aws_internet_gateway&quot; &quot;igw&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  vpc_id = aws_vpc.main.id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  tags = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Name = &quot;${var.vpc_name}-igw&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">resource &quot;aws_route_table&quot; &quot;public-route&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  vpc_id = aws_vpc.main.id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  route {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cidr_block = &quot;0.0.0.0/0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    gateway_id = aws_internet_gateway.igw.id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  tags = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;Name&quot; = &quot;${var.vpc_name}-public-route&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">resource &quot;aws_route_table_association&quot; &quot;public-a-association&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  subnet_id      = aws_subnet.public-subnet-a.id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  route_table_id = aws_route_table.public-route.id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">resource &quot;aws_route_table_association&quot; &quot;public-b-association&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  subnet_id      = aws_subnet.public-subnet-b.id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  route_table_id = aws_route_table.public-route.id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>ì œì¼ ë¨¼ì € ì¸í„°ë„· ê²Œì´íŠ¸ì›¨ì´ ë¦¬ì†ŒìŠ¤ë¥¼ VPCì— ì¶”ê°€í•´ì¤ë‹ˆë‹¤.</p><p>ì´ë•ŒëŠ” ìœ„ì—ì„œ ìƒì„±ëœ VPCì— ëŒ€í•œ idë¥¼ í™œìš©í•˜ì—¬ ì¸í„°ë„· ê²Œì´íŠ¸ì›¨ì´ë¥¼ ìƒì„±í•´ì¤ë‹ˆë‹¤.</p><p>í…Œë¼í¼ì˜ <code>[aws_internet_gateway](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/internet_gateway)</code> ë¦¬ì†ŒìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ì¸í„°ë„· ê²Œì´íŠ¸ì›¨ì´ë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><p>ì—­ì‹œ ê´€ë¦¬ì ì½˜ì†”ì—ì„œ ì‰½ê²Œ í™•ì¸í•  ìˆ˜ ìˆë„ë¡ íƒœê·¸ë¥¼ ì•Œì•„ì¤ë‹ˆë‹¤.</p><p>ê·¸ í›„, ê²Œì´íŠ¸ì›¨ì´ì—ì„œ ì„œë¸Œë„·ìœ¼ë¡œ íŠ¸ë˜í”½ì„ ë¼ìš°íŒ…í•˜ëŠ” ë°©ë²•ì„ AWSì— ì•Œë¦¬ëŠ” ë¼ìš°íŒ… ê·œì¹™ì„ ì •ì˜í•©ë‹ˆë‹¤. </p><p>ê·¸ëŸ¬ê¸° ìœ„í•´ì„œëŠ” ë¼ìš°íŒ… í…Œì´ë¸”ì´ í•„ìš”í•˜ë©°, í…Œë¼í¼ì˜ <code>[aws_route_table](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/route_table)</code> ë¦¬ì†ŒìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒì„±í•´ì¤ë‹ˆë‹¤.</p><p>ë¼ìš°íŒ… í…Œì´ë¸”ì—ì„œëŠ” ì¸í„°ë„·ì˜ ëª¨ë“  íŠ¸ë˜í”½ (CIDR 0.0.0.0/0)ì„ ê²Œì´íŠ¸ì›¨ì´ë¥¼ í†µí•´ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ êµ¬ì„±í•©ë‹ˆë‹¤.</p><p>ì´í›„ ê³µê°œ ì„œë¸Œë„·ê³¼ ë¼ìš°íŒ… í…Œì´ë¸”ê°„ì˜ ì—°ê²°ì„ ìƒì„±í•´ì¤ë‹ˆë‹¤. </p><p>í…Œë¼í¼ì˜ <code>[aws_route_table_association](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/route_table_association)</code> ë¦¬ì†ŒìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ì„œë¸Œë„·ê³¼ ë¼ìš°íŒ… í…Œì´ë¸”ì„ ì—°ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><p>ê³µê°œ ì„œë¸Œë„·ì— ëŒ€í•œ ë¼ìš°íŒ… ê²½ë¡œë¥¼ ì •ì˜í•œ ë’¤ì—ëŠ” ì‚¬ì„¤ ì„œë¸Œë„·ì— ëŒ€í•œ ë¼ìš°íŒ… ì„¤ì •ì„ ì§„í–‰í•´ì•¼í•©ë‹ˆë‹¤.</p><p>ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ íŒŒë“œê°€ EKS ì„œë¹„ìŠ¤ì™€ í†µì‹ í•  ìˆ˜ ìˆë„ë¡ ì‚¬ì„¤ ì„œë¸Œë„·ì—ì„œ ì¸í„°ë„·ìœ¼ë¡œ ë‚˜ê°€ëŠ” ê²½ë¡œë¥¼ ì§€ì •í•´ì•¼í•©ë‹ˆë‹¤. </p><p>ì´ë¥¼ ìœ„í•´ ì‚¬ì„¤ ì„œë¸Œë„·ì—ì„œ ê³µê°œ ì„œë¸Œë„·ì— ë°°í¬ëœ ì¸í„°ë„· ê²Œì´íŠ¸ì›¨ì´ì™€ í†µì‹ í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì´ í•„ìš”í•©ë‹ˆë‹¤. </p><p>AWSëŠ” ì´ë¥¼ ìœ„í•´ NAT ê²Œì´íŠ¸ì›¨ì´ ë¦¬ì†ŒìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤. </p><p><a href="https://docs.aws.amazon.com/ko_kr/vpc/latest/userguide/vpc-nat-gateway.html" target="_blank" rel="noopener noreferrer">NAT ê²Œì´íŠ¸ì›¨ì´</a></p><p>NATì„ ìƒì„±í•˜ê¸° ìœ„í•´ì„œëŠ” íŠ¹ë³„í•œ IP ì£¼ì†Œì¸ <a href="https://docs.aws.amazon.com/ko_kr/AWSEC2/latest/UserGuide/elastic-ip-addresses-eip.html" target="_blank" rel="noopener noreferrer">EIP</a>(Elastic IP adress / íƒ„ë ¥ì  IP ì£¼ì†Œ)ë¥¼ í• ë‹¹í•´ì•¼í•©ë‹ˆë‹¤.</p><p>ì—¬ê¸°ì„œëŠ” 2ê°œì˜ EIPë¥¼ ìƒì„±í•˜ì—¬ NATì— í• ë‹¹í•´ì¤ë‹ˆë‹¤.</p><div class="codeBlockContainer_J+bg language-HCL theme-code-block"><div class="codeBlockContent_csEI HCL"><pre tabindex="0" class="prism-code language-HCL codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">resource &quot;aws_eip&quot; &quot;nat-a&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  vpc = true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  tags = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;Name&quot; = &quot;${var.vpc_name}-NAT-a&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">resource &quot;aws_eip&quot; &quot;nat-b&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  vpc = true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  tags = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;Name&quot; = &quot;${var.vpc_name}-NAT-b&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">resource &quot;aws_nat_gateway&quot; &quot;nat-gw-a&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  allocation_id = aws_eip.nat-a.id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  subnet_id     = aws_subnet.public-subnet-a.id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  depends_on    = [aws_internet_gateway.igw]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  tags = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;Name&quot; = &quot;${var.vpc_name}-NAT-gw-a&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">resource &quot;aws_nat_gateway&quot; &quot;nat-gw-b&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  allocation_id = aws_eip.nat-b.id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  subnet_id     = aws_subnet.public-subnet-b.id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  depends_on    = [aws_internet_gateway.igw]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  tags = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;Name&quot; = &quot;${var.vpc_name}-NAT-gw-b&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><code>[aws_eip](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/eip)</code> í…Œë¼í¼ ë¦¬ì†ŒìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ eipë¥¼ ìƒì„±í•´ì¤ë‹ˆë‹¤.</p><p><code>[aws_nat_gateway](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/nat_gateway)</code> í…Œë¼í¼ ë¦¬ì†ŒìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒì„±í•œ eipë¥¼ í• ë‹¹í•˜ê³  ìƒì„±í–ˆë˜ ê³µê°œì„œë¸Œë„·ì„ ì—°ê²°í•´ì¤ë‹ˆë‹¤. </p><p>ì˜¬ë°”ë¥¸ ìˆœì„œë¥¼ ë³´ì¥í•´ì£¼ê¸° ìœ„í•´ ìœ„ì—ì„œ ìƒì„±í–ˆë˜ ì¸í„°ë„· ê²Œì´íŠ¸ì›¨ì´ì— ëŒ€í•œ ëª…ì‹œì  ì¢…ì†ì„±ì„ ì¶”ê°€í•´ì¤ë‹ˆë‹¤.</p><p>NAT ê²Œì´íŠ¸ì›¨ì´ë¥¼ êµ¬ì„±í•œ ë’¤ì—ëŠ” ì‚¬ì„¤ ì„œë¸Œë„·(private subnet)ì— ëŒ€í•œ ë¼ìš°íŒ…ì„ ì •ì˜í•´ì¤ë‹ˆë‹¤.</p><div class="codeBlockContainer_J+bg language-HCL theme-code-block"><div class="codeBlockContent_csEI HCL"><pre tabindex="0" class="prism-code language-HCL codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">esource &quot;aws_route_table&quot; &quot;private-route-a&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  vpc_id = aws_vpc.main.id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  route {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cidr_block     = &quot;0.0.0.0/0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    nat_gateway_id = aws_nat_gateway.nat-gw-a.id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  tags = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;Name&quot; = &quot;${var.vpc_name}-private-route-a&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">resource &quot;aws_route_table&quot; &quot;private-route-b&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  vpc_id = aws_vpc.main.id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  route {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cidr_block     = &quot;0.0.0.0/0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    nat_gateway_id = aws_nat_gateway.nat-gw-b.id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  tags = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;Name&quot; = &quot;${var.vpc_name}-private-route-b&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">resource &quot;aws_route_table_association&quot; &quot;private-a-association&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  subnet_id      = aws_subnet.private-subnet-a.id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  route_table_id = aws_route_table.private-route-a.id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">resource &quot;aws_route_table_association&quot; &quot;private-b-association&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  subnet_id      = aws_subnet.private-subnet-b.id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  route_table_id = aws_route_table.private-route-b.id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>ìœ„ì—ì„œ ê³µê°œ ì„œë¸Œë„·ì— ëŒ€í•œ ë¼ìš°íŒ…ì„ ì •ì˜í•´ì¤„ ë•Œì™€ ë§ˆì°¬ê°€ì§€ë¡œ í…Œë¼í¼ì˜ <code>[aws_route_table](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/route_table)</code> ë¦¬ì†ŒìŠ¤ë¥¼ í†µí•´ ë¨¼ì € ë¼ìš°íŒ… í…Œì´ë¸”ì„ êµ¬ì„±í•©ë‹ˆë‹¤. ë‹¨ ì´ë•ŒëŠ” ì¸í„°ë„· ê²Œì´íŠ¸ì›¨ì´ê°€ ì•„ë‹Œ ë°”ë¡œ ìœ„ì—ì„œ êµ¬ì„±í•œ NAT ê²Œì´íŠ¸ì›¨ì´ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. </p><p>ë¼ìš°íŒ… í…Œì´ë¸”ì„ ìƒì„±í•œ ë’¤ì—ëŠ” í…Œë¼í¼ì˜ <code>[aws_route_table_association](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/route_table_association)</code> ë¦¬ì†ŒìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‚¬ì„¤ ì„œë¸Œë„·ê³¼ ë¼ìš°íŒ… í…Œì´ë¸”ì„ ì—°ê²°í•´ì¤ë‹ˆë‹¤.</p><p>ì—¬ê¸°ê¹Œì§€ ì§„í–‰í•˜ì˜€ë‹¤ë©´ í…Œë¼í¼ì„ í†µí•œ ë„¤íŠ¸ì›Œí¬ ëª¨ë“ˆì˜ <code>main.tf</code> ê°€ ëì´ ë‚¬ìŠµë‹ˆë‹¤.</p><p>ìƒì„±ëœ ë„¤íŠ¸ì›Œí¬ì˜ ëª¨ìŠµì€ ì•„ë˜ ì‚¬ì§„ì²˜ëŸ¼ êµ¬ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.</p><p><img src="https://user-images.githubusercontent.com/38996611/149650404-5e344cc5-7cd9-4ded-8461-0e84ff3b71a5.png" alt="vpc"></p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="variabletf"><code>variable.tf</code><a class="hash-link" href="#variabletf" title="Direct link to heading">â€‹</a></h3><blockquote><p><code>main.tf</code> íŒŒì¼ì—ì„œ ì‚¬ìš©í•œ ë³€ìˆ˜ë“¤ì„ ì—¬ê¸°ì„œ ì •ì˜í•©ë‹ˆë‹¤.</p></blockquote><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">variable </span><span class="token string" style="color:#e3116c">&quot;name&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin class-name">type</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">variable </span><span class="token string" style="color:#e3116c">&quot;aws_region&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin class-name">type</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">variable </span><span class="token string" style="color:#e3116c">&quot;vpc_name&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin class-name">type</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">variable </span><span class="token string" style="color:#e3116c">&quot;main_vpc_cidr&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin class-name">type</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">variable </span><span class="token string" style="color:#e3116c">&quot;public_subnet_a_cidr&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin class-name">type</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">variable </span><span class="token string" style="color:#e3116c">&quot;public_subnet_b_cidr&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin class-name">type</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">variable </span><span class="token string" style="color:#e3116c">&quot;private_subnet_a_cidr&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin class-name">type</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">variable </span><span class="token string" style="color:#e3116c">&quot;private_subnet_b_cidr&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin class-name">type</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">variable </span><span class="token string" style="color:#e3116c">&quot;cluster_name&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin class-name">type</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="network-ëª¨ë“ˆ-ì‚¬ìš©">Network ëª¨ë“ˆ ì‚¬ìš©<a class="hash-link" href="#network-ëª¨ë“ˆ-ì‚¬ìš©" title="Direct link to heading">â€‹</a></h3><p>network ëª¨ë“ˆì„ êµ¬ì„±í–ˆìœ¼ë©´ ì´ì œ ì‚¬ìš©í•  ì°¨ë¡€ì…ë‹ˆë‹¤. </p><p>ì´ì „ í…Œë¼í¼ ë°±ì—”ë“œë¥¼ ì„ ì–¸í–ˆë˜ <code>main.tf</code> íŒŒì¼ì—ì„œ ë„¤íŠ¸ì›Œí¬ ëª¨ë“ˆì„ ì‚¬ìš©í•´ì¤ë‹ˆë‹¤.</p><p><code>variable.tf</code> íŒŒì¼ì— ì„ ì–¸ë˜ì–´ìˆëŠ” ë³€ìˆ˜ë“¤ì— ê°’ì„ ì „ë¶€ ë„£ì–´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.</p><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">locals </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name              </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;data-team-infra&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  region            </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;ap-northeast-2&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  availability_zone </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;ap-northeast-2a&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  k8s_cluster_name  </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;cluster&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  tags </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Owner       </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;aib&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Environment </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;dev&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">module </span><span class="token string" style="color:#e3116c">&quot;aws-network&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin class-name">source</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;./network_module&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name                  </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> local.name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  vpc_name              </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;aib_eks_vpc&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  cluster_name          </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> local.k8s_cluster_name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  aws_region            </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> local.region</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  main_vpc_cidr         </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;10.10.0.0/16&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public_subnet_a_cidr  </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;10.10.0.0/18&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public_subnet_b_cidr  </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;10.10.64.0/18&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  private_subnet_a_cidr </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;10.10.128.0/18&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  private_subnet_b_cidr </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;10.10.192.0/18&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>ë‹¤ë¥¸ ëª¨ë“ˆë“¤ì—ì„œë„ ê³µí†µìœ¼ë¡œ ì‚¬ìš©í•  ê°’ë“¤ì— ëŒ€í•´ì„œ ë¡œì»¬ ë³€ìˆ˜ë¡œ ì§€ì •í•´ì¤ë‹ˆë‹¤.</p><p>ì´í›„ <code>network_module</code> ëª¨ë“ˆì„ ì‚¬ìš©í•©ë‹ˆë‹¤.</p><p><code>source</code> ì—ëŠ” ìœ„ì—ì„œ ìƒì„±í–ˆë˜ <code>network_module</code> ì˜ ìœ„ì¹˜ë¥¼ ì…ë ¥í•´ì¤ë‹ˆë‹¤.</p><p>ê° ì„œë¸Œë„·ì˜ CIDRë¥¼ ì…ë ¥í•´ì¤ë‹ˆë‹¤. </p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="ë§ˆë¬´ë¦¬">ë§ˆë¬´ë¦¬<a class="hash-link" href="#ë§ˆë¬´ë¦¬" title="Direct link to heading">â€‹</a></h3><p>ì „ë¶€ ì…ë ¥í›„ í…Œë¼í¼ ëª…ë ¹ì–´ë¥¼ í†µí•´ í¬ë©§íŒ…ë¶€í„° planê¹Œì§€ ì§„í–‰í•©ë‹ˆë‹¤.</p><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">terraform </span><span class="token function" style="color:#d73a49">fmt</span><span class="token plain"> </span><span class="token builtin class-name">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">terraform init</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">terraform validate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">terraform plan</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>ë¬¸ì œì—†ì´ ì‹¤í–‰ë˜ëŠ” ê²ƒì„ í™•ì¸í•œ í›„ apply í•´ì¤ë‹ˆë‹¤</p><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">terraform apply</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>í…Œë¼í¼ì´ ì‹¤í–‰ëœ í›„ VPCê°€ ì„±ê³µì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆëŠ”ì§€ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">aws ec2 describe-vpcs --filters </span><span class="token assign-left variable" style="color:#36acaa">Name</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">cidr,Values</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">10.10</span><span class="token plain">.0.0/16</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-tags-row row margin-bottom--sm"><div class="col"><b>Tags:</b><ul class="tags_NBRY padding--none margin-left--sm"><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/til/docs/tags/aws">AWS</a></li><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/til/docs/tags/eks">EKS</a></li><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/til/docs/tags/terraform">Terraform</a></li><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/til/docs/tags/network">Network</a></li><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/til/docs/tags/vpc">VPC</a></li><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/til/docs/tags/datahub-with-eks">Datahub with EKS</a></li></ul></div></div><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://wonjun0120/github.io/til/docs/docs/Datahub with EKS/TerraformNetworkModule.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/til/docs/Datahub with EKS/terraform_basic_setting"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">EKS Datahub 2 Terraform ì´ˆê¸° ì„¸íŒ…</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/til/docs/Datahub with EKS/terraform_eks_module"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">EKS Datahub 4 Terraform EKS Module</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#ë˜í¼ëŸ°ìŠ¤" class="table-of-contents__link toc-highlight">ë˜í¼ëŸ°ìŠ¤</a></li><li><a href="#network-ë“¤ì–´ê°€ê¸°-ì•ì„œ" class="table-of-contents__link toc-highlight">Network ë“¤ì–´ê°€ê¸° ì•ì„œ..</a></li><li><a href="#network-with-terraform" class="table-of-contents__link toc-highlight">Network with Terraform</a></li><li><a href="#outputtf" class="table-of-contents__link toc-highlight"><code>output.tf</code></a></li><li><a href="#maintf" class="table-of-contents__link toc-highlight"><code>main.tf</code></a></li><li><a href="#variabletf" class="table-of-contents__link toc-highlight"><code>variable.tf</code></a></li><li><a href="#network-ëª¨ë“ˆ-ì‚¬ìš©" class="table-of-contents__link toc-highlight">Network ëª¨ë“ˆ ì‚¬ìš©</a></li><li><a href="#ë§ˆë¬´ë¦¬" class="table-of-contents__link toc-highlight">ë§ˆë¬´ë¦¬</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/til/docs/intro">Project Logs</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/til/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/wonjun0120" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/til/assets/js/runtime~main.2dd48f90.js"></script>
<script src="/til/assets/js/main.7dcddf2a.js"></script>
</body>
</html>